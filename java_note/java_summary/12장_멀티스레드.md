## 12장 멀티스레드 

### 12.1 멀리스레드 개념 
--- 

* 프로세스 
	운영체제에서는 실행 중인 하나의 애플리케이션을 프로세스라고 부른다. 


* 멀티 태스킹 
	두 가지 이상의 작업을 동시에 처리하는 것을 멀티 태스킹이라고 하는데, 운영체제는 멀티 태스킹을 할 수 있도록 cpu및 메모리 자원을 프로세스마다 적절히 할당해주고, 병렬로 실행시킨다. 


> 멀티 태스킹은 꼭 멀티 프로세스를 뜻하지는 않는다. 한 프로세스 내에서 멀티 태스킹을 할 수 있도록 만들어진 어플리케이션도 있다. 


* 스레드
	위의 한 프로세스 내에서 멀티 태스킹을 가능하게 해주는 것이 스레드의 역할이다. 


> 프로세스마다 멀티 스레드일 수도 있고 싱글 스레드일 수도 있다.


* 스레드 사용의 주의사항 
	여러 멀티 스레드를 사용하야 되는 상황에서, 한 가지 스레드가 에러를 발생하면 프로세스 전체가 꺼지기 때문에 예외처리에 대해서 확실하게 해줘야 한다. 


#### 12.1.2 메인 스레드 

모든 자바 애플리케이션은 메인 스레드가 main() 메소드를 실행하면서 시작된다. 


메인 스레드는 필요에 따라 작업 스레드들을 만들어서 병렬로 코드를 실행시킬 수 있다.


### 12.2 작업 스레드 생성과 실행
---

멀티 스레드를 사용하려면, 몇 개의 작업을 병렬로 실행할 것인지 정해야 한다. 그리고 각 작업별로 스레드를 생성행햐 한다. 


#### 12.2.1 Thread 클래스로부터 직접 생성

			Thread thread = new Tread( Runnable target );

> java.lang.Thread 클래스로부터 작업 스레드 객체를 직접 생성하려면 위와 같이 Runnable를 매개값으로 갖는 생성자를 호출해야 한다. 


Runnable은 인터페이스 형식으로 되어 있는데 내부 메소드로는 run() 메소드가 정의되어 있다. 그래서 Runnable를 사용하려면 run()을 오버라이딩하여서 사용해야 한다. 


			Runnable task = new Task();
			Thread thread = new Thread(task);

> 위 처럼 Thread의 매개값으로 Runnable의 객체가 사용된다. 


			Thread thread = new Thread ( new Runnable );

> 이런 형식으로 Runnable의 익명객체를 만들어 코드를 단순하게 만들 수도 있다. 


작업스레드는 start() 메소드를 통해 실행되기 시작한다. 


#### 12.2.2 Thread 하위 클래스로부터 생성 

작업 스레드가 실행할 작업을 Runnable로 만들지 않고, Thread의 하위 클래스로 작업 스레드를 정의하면서 작업 내용을 포함시킬 수 있다. 

			public class WorkerThread extend Thread {

					@overrid 
					public void run() {
					// 쓰레드에서 실행될 코드 
					}
			}
			Thread thread = new WorkerThread();


#### 12.2.3 쓰레드 이름 

디버깅할 때 쓰레드가 어떤 작업을 하는 쓰레드인지 알아야 할 필요가 있다. 그렇기 때문에 쓰레드 이름의 임의적으로 바꿔서 만드는 것이 디버깅할 때 유리하다. 


			thread.setName (" 쓰레드 이름 ")
			// 쓰레드 이름 결정

			thread.getName();
			// 반대로 쓰레드의 이름을 알고 싶을 때 


### 12.3 쓰레드의 우선순위 
---

멀티 쓰레드는 동시성 또는 병렬성으로 실행된다. 
	- 동시성 :  멀티 작업을 위해 하나의 코어에서 멀티 쓰레드가 번갈아가며 실행하는 성질
	- 병렬성 :  멀티 작업을 위해 멀티 코어에서 개별 쓰레드를 동시에 실행하는 성질 


쓰레드의 개수가 코어의 수 보다 많을 경우, 쓰레드를 어떤 순서로 실행시킬 것인지 우선순위를 정해야 한다. 이것을 "쓰레드 스케쥴링"이라고 한다. 


* 쓰레드 스케쥴링
	- 우선순위 방식 : 우선순위가 높은 쓰레드가 실행 상태래ㅡㄹ 더 많이 가지도록 스케쥴링 하는 것 
	- 순환 할당 방식 : 시간 할당량을 정해서 하나의 쓰레드를 정해진 시간만큼 실행하고 다시 다른 쓰레드를 실행하는 방식 


> 우선순위 방식은 개발자가 코드로 제어할 수 있지만, 순환 할당 방식은 개발자가 제어할 수 없다. 


			thread.setPriority(우선순위);

> 위 같은 방식으로 우선순위를 결정해준다. 


### 12.4 동기화 메소드와 동기화 블럭
---

멀티 쓰레드를 사용하게 될 때 쓰레드가 객체를 공유해서 작업하는 경우가 있다. 그런데 그러면 한 쓰레드가 객체를 작업하다가 다른 쓰레드가 들어와 작업하는 경우 프로세스에 문제가 생길 수도 있다.


그것을 막기 위하여 "동기화 메소드"와 "동기화 블럭"을 사용하는 것이다. 


멀티 쓰레드 프로그램에서 단 하나의 쓰레드만 실행시킬 수 있는 코드 영역을 "임계 영역"이라고 한다. 


자바에서는 임계 영역을 지정하기 위하여 동기화 메소드와 동기화 블럭을 사용하는 것이다. 


그리고 메소드 전체를 임계 영역으로 만드는 것이 아니라 일 부분만 임계영역으로 만들고 싶을 때는 " 동기화 (synchronized) 블럭"을 사용한다. 


### 12.5 이후 정리 할 것 




