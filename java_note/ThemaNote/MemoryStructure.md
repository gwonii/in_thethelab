

# MEMORY STRUCTURE



## 1. 저장공간 

1. 데이터영역 (전역변수, static 변수) 
2. Stack (지역변수, 매개변수) -> 컴파일 타임에 크기 결정
3. Heap ( 프로그래머 할당) -> 런 타임에 크기 결정 

### 1.1 구분 

* 할당 시기, 할당 장소, 할당 용도 

## 1. 데이터 영역

* 전역 변수와 static 변수가 할당되는 영역 
* 프로그램의 시작과 동시에 할당되고, 프로그램이 종료되어야 메모리에서 소멸됨

```c
#include <stdio.h> 
int a = 10;	// 데이터 영역에 할당 
int b = 20;	// 데이터 영역에 할당 

int main() { ... return 0; }

```



## 2. 스택 영역

* 함수 호출 시 생성되는 지역 변수와 매개 변수가 저장되는 영역 
* 함수 호출이 완료되면 사라짐
* 컴파일 타임에 크기가 결정된다.

```c
#include <stdio.h> 
void fct1(int); 
void fct2(int); 
int a = 10;	// 데이터 영역에 할당 
int b = 20;	// 데이터 영역에 할당 

int main() { 
int i = 100;	// 지역변수 i가 스택 영역에 할당 
fct1(i); 
fct2(i); 
return 0; 
}

void fct1(int c) { 
int d = 30;	// 매개변수 c와 지역변수 d가 스택영역에 할당 
} 
void fct2(int e) { 
int f = 40;	// 매개변수 e와 지역변수 f가 스택영역에 할당 
}

```

## 3. 힙 영역 

* 필요에 의해 동적으로 메모리를 할당할 때 사용된다.
* 런 타임에 크기가 결정된다.  

```c
int main() { 

// 정상적인 배열선언 
int arr[10]; 

// 비 정상적인 배열선언 
int i = 10; 
int arr[i];
return 0; 
}
```

* 스택 영역에 할당 될 메모리의 크기는 컴파일 타임(컴파일 하는 동안)에 결정된다.

int i 가 4 바이트라는 것은 컴파일 타임에 알 수 있지만, int i의 값이 10이라고 선언되는 것은 런타임에 알 수 있다. int arr[10]의 경우에는 저장공간이 40바이트라는 것을 컴파일 타임에 알 수 있다. 

