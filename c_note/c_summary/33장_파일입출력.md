## 33장 파일입출력 

### 33.1 파일과 스트림 그리고 기본적인 파일의 입출력
--- 

* 파일에 저장되어 있는 데이터를 읽고 싶을 때 

구현한 프로그램과 참조할 데이터가 저장되어 있는 파일 사이에 데이터가 이동할 수 있는 다리 를 놓는 일이다. 이 다리를 가리켜 컴퓨터 공학에서는 "스트림"이라고 한다. 

파일은 운영체제에 의해서  그 구조가 결정되어 관리되기 때문에, 파일 뿐만 아니라 스트림의 형성도 운영체제의 몫이다. 

* 파일의 스트림을 형성하는 방법, fopen함수

			#include <stdio.h>
			FILE *fopen(const char *filename, const char *mode);
			성공 시 해당 파일의 FILE 구조체 포인터, 실패 시 NULL 포인터 반환

* FILE 구조체란? 

FILE은 기본적으로 구조체의 이름이다. 위 함수가 반환하는 포인터는 파일을 지시하기 위한 용도로 사용된다. 이 포인터를 이용해서 포인터가 가리키는파일에 데이터를 저장하거나 파일에 저장된 데이터를 읽게 된다. 

* fopen 함수를 호출했을 때 일어나는 일들 

1. fopen함수가 호출되면 FILE 구조체 변수가 생성된다. 
2. 생성된 FILE 구조체 변수에는 파일의 정보가 담긴다. 
3. FILE 구조체의 포인터는 사실상 파일을 가리키는 참조자의 역할을 한다. 

* 입력 스트림과 출력 스트림

1. 첫번 째 전달인자 : 스트림을 형성할 파일의 이름 
2. 두번 째 전달인자 : 생성하고자 하는 스트림의 종류

작성하는 스트림을 출력 스트림, 읽는 스트림을 입력 스트림이라고 한다.

### 33.3 기본적인 파일 입출력 함수들의 활용
---

* 자동으로 열리는 스트림 : stdin, stdout, stderr

stdin : 표준 입력 스트림 (키보드)
stdout : 표준 출력 스트림 (모니터)
stderr : 표준 에러 스트림 (모니터)

			문자
			int fgets(FILE *stream)   --입력
			int getc(FILE *stream)   --입력// 사실상 거의 사용하지 않음 
			
			int fputc(FILE *stream)   --출력
			int putc(FILE *stream)   --출력

			문자열
			char *fgets(char *s, int n, FILE *stream)
			int fputs(const char *s, FILE *stream)

			서식
			int fscanf(FILE *stream, const char *format ... )
			int fprintf(FILE *stream, const char *format ... )

* 파일의 끝을 확인하는 방법 : feof

			#include <stdio.h>
			int feof(FILE *stream);

### 33.5 임의 접근을 위한 파일 위치 지시자의 이동 

* 파일 위치 지시자란?

FILE 구조체의 맴버중에는 파일의 위치 정보를 가지고 있는 맴버가 있다. 멤버의 저장된 위치 정보의 갱신을 통해서 데이터를 읽고 쓸 위치 정보가 유지되는 것이다. 

			#include <stdio.h>
			int fseek(FILE *stream, long offset, int wherefrom);
			


---

* 파일 모드 정리 

1. "r" : 일기 전용 
		파일을 읽기 전용으로 엽니다. 단, 파일이 반드시 있어야 한다. 

2. "w" : 쓰기 전용 
		새 파일을 생성한다. 만약 파일이 있으면 내용을 덮어쓴다. 

3. "a" : 추가
		파일을 열어 파일 끝에 값을 이어 쓴다. 만약 파일이 없으면 파일을 생성한다. 

4. "r+" : 읽기/쓰기 전용
		파일을 읽기/쓰기 용으로 연다. 단, 파일이 반드시 있어야 하며, 파일이 없으면 null 을 반환한다. 

5. "w+" : 읽기/쓰기 전용
		파일을 읽기/쓰기용으로 연다. 파일이 없으면 파일을 생성하고, 파일이 있으면 내용을 덮어쓴다. 


6. "a+" : 추가(읽기/쓰기)
		파일을 열어 파일 끝에 값을 이어 쓴다. 만약 파일이 없으면 파일을 생성한다. 읽기는 파일의 모든 구간에서 가능하지만, 쓰기는 파일의 끝에서만 가능하다. 

7. "t" : 텍스트 모드 
		파일을 읽거나 쓸 때 개행문자 \n와 \r, \n을 서로 변환한다. ^Z을 파일의 끝으로 인식하므로 ^Z까지만 파일을 읽는다. (^Z는 ctrl + z를 의미한다. )

8. "b" : 바이너리 모드 
		파일의 내용을 그대로 읽고, 값을 그대로 쓴다. 


* 파일 모드의 복합적인 사용 

보통 "rb", "rt", "w+b" 등 섞어서 사용하기도 한다. 













